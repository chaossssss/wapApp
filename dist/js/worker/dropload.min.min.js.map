{"version":3,"sources":["worker/dropload.min.js"],"names":["a","g","touches","originalEvent","h","b","_startY","pageY","touchScrollTop","$scrollArea","scrollTop","i","c","_curY","_moveY","direction","d","Math","abs","opts","loadUpFn","isLockUp","preventDefault","$domUp","domUp","domClass","upInsertDOM","$element","prepend","n","distance","_offsetY","html","domRefresh","domUpdate","css","height","j","children","domLoad","loading","on","this","remove","k","autoLoad","_scrollContentHeight","_threshold","_scrollWindowHeight","m","l","scrollArea","e","scrollHeight","$domDown","domDown","loadDownFn","-webkit-transition","transition","f","window","document","fn","dropload","isLockDown","isData","_scrollTop","init","prototype","extend","domNoData","threshold","append","floor","documentElement","clientHeight","innerHeight","lock","unlock","noData","resetload","Zepto","jQuery"],"mappings":"CAKC,SAASA,GAAG,YAAa,SAASC,GAAED,GAAGA,EAAEE,UAAUF,EAAEE,QAAQF,EAAEG,cAAcD,SAAS,QAASE,GAAEJ,EAAEK,GAAGA,EAAEC,QAAQN,EAAEE,QAAQ,GAAGK,MAAMF,EAAEG,eAAeH,EAAEI,YAAYC,YAAY,QAASC,GAAEN,EAAEO,GAAGA,EAAEC,MAAMR,EAAEH,QAAQ,GAAGK,MAAMK,EAAEE,OAAOF,EAAEC,MAAMD,EAAEN,QAAQM,EAAEE,OAAO,EAAEF,EAAEG,UAAU,OAAOH,EAAEE,OAAO,IAAIF,EAAEG,UAAU,KAAM,IAAIC,GAAEC,KAAKC,IAAIN,EAAEE,OAAQ,KAAIF,EAAEO,KAAKC,UAAUR,EAAEJ,gBAAgB,GAAG,QAAQI,EAAEG,YAAYH,EAAES,WAAWhB,EAAEiB,iBAAiBV,EAAEW,OAAOvB,EAAE,IAAIY,EAAEO,KAAKK,MAAMC,UAAUb,EAAEc,cAAcd,EAAEe,SAASC,QAAQ,eAAehB,EAAEO,KAAKK,MAAMC,SAAS,YAAYb,EAAEc,aAAY,GAAIG,EAAEjB,EAAEW,OAAO,GAAGP,GAAGJ,EAAEO,KAAKW,UAAUlB,EAAEmB,SAASf,EAAEJ,EAAEW,OAAOS,KAAKpB,EAAEO,KAAKK,MAAMS,aAAajB,EAAEJ,EAAEO,KAAKW,UAAUd,GAAG,EAAEJ,EAAEO,KAAKW,UAAUlB,EAAEmB,SAASnB,EAAEO,KAAKW,SAAS,IAAId,EAAEJ,EAAEO,KAAKW,UAAUlB,EAAEW,OAAOS,KAAKpB,EAAEO,KAAKK,MAAMU,YAAYtB,EAAEmB,SAASnB,EAAEO,KAAKW,SAAS,GAAGlB,EAAEO,KAAKW,SAAS,IAAId,EAAE,EAAEJ,EAAEO,KAAKW,UAAUlB,EAAEW,OAAOY,KAAKC,OAAOxB,EAAEmB,YAAY,QAASM,GAAEhC,GAAG,GAAIO,GAAEK,KAAKC,IAAIb,EAAES,OAAQ,KAAIT,EAAEc,KAAKC,UAAUf,EAAEG,gBAAgB,GAAG,QAAQH,EAAEU,YAAYV,EAAEgB,WAAWQ,EAAExB,EAAEkB,OAAO,KAAKX,EAAEP,EAAEc,KAAKW,UAAUzB,EAAEkB,OAAOY,KAAKC,OAAO/B,EAAEkB,OAAOe,WAAWF,WAAW/B,EAAEkB,OAAOS,KAAK3B,EAAEc,KAAKK,MAAMe,SAASlC,EAAEmC,SAAQ,EAAGnC,EAAEc,KAAKC,SAASf,IAAIA,EAAEkB,OAAOY,KAAKC,OAAO,MAAMK,GAAG,qDAAqD,WAAWpC,EAAEqB,aAAY,EAAG1B,EAAE0C,MAAMC,WAAWtC,EAAES,OAAO,GAAG,QAAS8B,GAAE5C,GAAGA,EAAEmB,KAAK0B,UAAU7C,EAAE8C,qBAAqB9C,EAAE+C,YAAY/C,EAAEgD,qBAAqBC,EAAEjD,GAAG,QAASkD,GAAElD,GAAGA,EAAE8C,qBAAqB9C,EAAEmB,KAAKgC,YAAY9C,EAAE+C,EAAEhB,SAASpC,EAAE2B,SAAS,GAAG0B,aAAa,QAASJ,GAAEjD,GAAGA,EAAEe,UAAU,KAAKf,EAAEsD,SAAStB,KAAKhC,EAAEmB,KAAKoC,QAAQhB,SAASvC,EAAEwC,SAAQ,EAAGxC,EAAEmB,KAAKqC,WAAWxD,GAAG,QAAS6B,GAAE7B,EAAEK,GAAGL,EAAEmC,KAAKsB,qBAAqB,OAAOpD,EAAE,KAAKqD,WAAW,OAAOrD,EAAE,OAAO,GAAIsD,GAAEtD,EAAEuD,OAAOhD,EAAEiD,SAAS7C,EAAEhB,EAAEK,GAAG+C,EAAEpD,EAAEY,EAAGZ,GAAE8D,GAAGC,SAAS,SAAS/D,GAAG,MAAO,IAAI2D,GAAEjB,KAAK1C,IAAI2D,EAAE,SAAS3D,EAAEK,GAAG,GAAIO,GAAE8B,IAAK9B,GAAEe,SAAS3B,EAAEY,EAAEc,aAAY,EAAGd,EAAE4B,SAAQ,EAAG5B,EAAES,UAAS,EAAGT,EAAEoD,YAAW,EAAGpD,EAAEqD,QAAO,EAAGrD,EAAEsD,WAAW,EAAEtD,EAAEmC,WAAW,EAAEnC,EAAEuD,KAAK9D,IAAIsD,EAAES,UAAUD,KAAK,SAASR,GAAG,GAAIT,GAAER,IAAKQ,GAAE/B,KAAKnB,EAAEqE,QAAO,MAAOlB,WAAWD,EAAEvB,SAASH,OAAOC,SAAS,cAAcQ,WAAW,4CAA4CC,UAAU,2CAA2CK,QAAQ,wEAAwEgB,SAAS9B,SAAS,gBAAgBQ,WAAW,8CAA8CM,QAAQ,uEAAuE+B,UAAU,2CAA2CzB,UAAS,EAAGf,SAAS,GAAGyC,UAAU,GAAGnD,SAAS,GAAGoC,WAAW,IAAIG,GAAG,IAAIT,EAAE/B,KAAKqC,aAAaN,EAAEvB,SAAS6C,OAAO,eAAetB,EAAE/B,KAAKoC,QAAQ9B,SAAS,KAAKyB,EAAE/B,KAAKoC,QAAQtB,WAAW,UAAUiB,EAAEI,SAAStD,EAAE,IAAIkD,EAAE/B,KAAKoC,QAAQ9B,WAAWyB,EAAEH,WAAWG,EAAEI,UAAU,KAAKJ,EAAE/B,KAAKoD,UAAUtD,KAAKwD,MAAM,EAAEvB,EAAEI,SAASlB,SAAS,GAAGc,EAAE/B,KAAKoD,UAAUrB,EAAE/B,KAAKgC,YAAY9C,GAAG6C,EAAEzC,YAAYO,EAAEkC,EAAEJ,qBAAqBM,EAAEhB,SAASc,EAAEF,oBAAoBpC,EAAE8D,gBAAgBC,eAAezB,EAAEzC,YAAYyC,EAAE/B,KAAKgC,WAAWD,EAAEJ,qBAAqBI,EAAEvB,SAAS,GAAG0B,aAAaH,EAAEF,oBAAoBE,EAAEvB,SAASS,UAAUQ,EAAEM,GAAGlC,EAAEyB,GAAG,SAAS,WAAWS,EAAEF,oBAAoBE,EAAE/B,KAAKgC,YAAY9C,EAAEA,EAAEuE,YAAY1B,EAAEvB,SAASS,WAAWc,EAAEvB,SAASc,GAAG,aAAa,SAASzC,GAAGkD,EAAEV,UAAUvC,EAAED,GAAGI,EAAEJ,EAAEkD,MAAMA,EAAEvB,SAASc,GAAG,YAAY,SAASzC,GAAGkD,EAAEV,UAAUvC,EAAED,EAAEkD,GAAGvC,EAAEX,EAAEkD,MAAMA,EAAEvB,SAASc,GAAG,WAAW,WAAWS,EAAEV,SAASH,EAAEa,KAAKA,EAAEzC,YAAYgC,GAAG,SAAS,WAAWS,EAAEgB,WAAWhB,EAAEzC,YAAYC,YAAY,IAAIwC,EAAE/B,KAAKqC,aAAaN,EAAEV,UAAUU,EAAEc,YAAYd,EAAEJ,qBAAqBI,EAAEH,YAAYG,EAAEF,oBAAoBE,EAAEgB,YAAYjB,EAAEC,MAAMS,EAAES,UAAUS,KAAK,SAAS7E,GAAG,GAAIK,GAAEqC,IAAK,UAAS1C,EAAE,MAAMK,EAAEU,UAAUV,EAAE2D,YAAW,EAAG,QAAQ3D,EAAEU,UAAUV,EAAEgB,UAAS,GAAIhB,EAAEgB,UAAS,EAAGhB,EAAE2D,YAAW,GAAI,MAAMhE,EAAEK,EAAEgB,UAAS,EAAG,QAAQrB,IAAIK,EAAE2D,YAAW,EAAG3D,EAAEU,UAAU,OAAO4C,EAAES,UAAUU,OAAO,WAAW,GAAI9E,GAAE0C,IAAK1C,GAAEqB,UAAS,EAAGrB,EAAEgE,YAAW,EAAGhE,EAAEe,UAAU,MAAM4C,EAAES,UAAUW,OAAO,SAAS/E,GAAG,GAAIK,GAAEqC,IAAK,UAAS1C,GAAG,GAAGA,EAAEK,EAAE4D,QAAO,EAAG,GAAGjE,IAAIK,EAAE4D,QAAO,IAAKN,EAAES,UAAUY,UAAU,WAAW,GAAI3E,GAAEqC,IAAK,SAAQrC,EAAEU,WAAWV,EAAEqB,YAAYrB,EAAEkB,OAAOY,KAAKC,OAAO,MAAMK,GAAG,qDAAqD,WAAWpC,EAAEmC,SAAQ,EAAGnC,EAAEqB,aAAY,EAAG1B,EAAE0C,MAAMC,SAASO,EAAE7C,KAAK,MAAMA,EAAEU,YAAYV,EAAEmC,SAAQ,EAAGnC,EAAE4D,QAAQ5D,EAAEiD,SAAStB,KAAK3B,EAAEc,KAAKoC,QAAQtB,YAAYiB,EAAE7C,GAAGuC,EAAEvC,IAAIA,EAAEiD,SAAStB,KAAK3B,EAAEc,KAAKoC,QAAQe,cAAcV,OAAOqB,OAAOrB,OAAOsB","file":"worker/dropload.min.min.js","sourcesContent":["/**\n * dropload\n * 西门(http://ons.me/526.html)\n * 0.9.0(160215)\n */\n!function(a){\"use strict\";function g(a){a.touches||(a.touches=a.originalEvent.touches)}function h(a,b){b._startY=a.touches[0].pageY,b.touchScrollTop=b.$scrollArea.scrollTop()}function i(b,c){c._curY=b.touches[0].pageY,c._moveY=c._curY-c._startY,c._moveY>0?c.direction=\"down\":c._moveY<0&&(c.direction=\"up\");var d=Math.abs(c._moveY);\"\"!=c.opts.loadUpFn&&c.touchScrollTop<=0&&\"down\"==c.direction&&!c.isLockUp&&(b.preventDefault(),c.$domUp=a(\".\"+c.opts.domUp.domClass),c.upInsertDOM||(c.$element.prepend('<div class=\"'+c.opts.domUp.domClass+'\"></div>'),c.upInsertDOM=!0),n(c.$domUp,0),d<=c.opts.distance?(c._offsetY=d,c.$domUp.html(c.opts.domUp.domRefresh)):d>c.opts.distance&&d<=2*c.opts.distance?(c._offsetY=c.opts.distance+.5*(d-c.opts.distance),c.$domUp.html(c.opts.domUp.domUpdate)):c._offsetY=c.opts.distance+.5*c.opts.distance+.2*(d-2*c.opts.distance),c.$domUp.css({height:c._offsetY}))}function j(b){var c=Math.abs(b._moveY);\"\"!=b.opts.loadUpFn&&b.touchScrollTop<=0&&\"down\"==b.direction&&!b.isLockUp&&(n(b.$domUp,300),c>b.opts.distance?(b.$domUp.css({height:b.$domUp.children().height()}),b.$domUp.html(b.opts.domUp.domLoad),b.loading=!0,b.opts.loadUpFn(b)):b.$domUp.css({height:\"0\"}).on(\"webkitTransitionEnd mozTransitionEnd transitionend\",function(){b.upInsertDOM=!1,a(this).remove()}),b._moveY=0)}function k(a){a.opts.autoLoad&&a._scrollContentHeight-a._threshold<=a._scrollWindowHeight&&m(a)}function l(a){a._scrollContentHeight=a.opts.scrollArea==b?e.height():a.$element[0].scrollHeight}function m(a){a.direction=\"up\",a.$domDown.html(a.opts.domDown.domLoad),a.loading=!0,a.opts.loadDownFn(a)}function n(a,b){a.css({\"-webkit-transition\":\"all \"+b+\"ms\",transition:\"all \"+b+\"ms\"})}var f,b=window,c=document,d=a(b),e=a(c);a.fn.dropload=function(a){return new f(this,a)},f=function(a,b){var c=this;c.$element=a,c.upInsertDOM=!1,c.loading=!1,c.isLockUp=!1,c.isLockDown=!1,c.isData=!0,c._scrollTop=0,c._threshold=0,c.init(b)},f.prototype.init=function(f){var l=this;l.opts=a.extend(!0,{},{scrollArea:l.$element,domUp:{domClass:\"dropload-up\",domRefresh:'<div class=\"dropload-refresh\">↓下拉刷新</div>',domUpdate:'<div class=\"dropload-update\">↑释放更新</div>',domLoad:'<div class=\"dropload-load\"><span class=\"loading\"></span>加载中...</div>'},domDown:{domClass:\"dropload-down\",domRefresh:'<div class=\"dropload-refresh\">↑上拉加载更多</div>',domLoad:'<div class=\"dropload-load\"><span class=\"loading\"></span>加载中...</div>',domNoData:'<div class=\"dropload-noData\">暂无数据</div>'},autoLoad:!0,distance:50,threshold:\"\",loadUpFn:\"\",loadDownFn:\"\"},f),\"\"!=l.opts.loadDownFn&&(l.$element.append('<div class=\"'+l.opts.domDown.domClass+'\">'+l.opts.domDown.domRefresh+\"</div>\"),l.$domDown=a(\".\"+l.opts.domDown.domClass)),l._threshold=l.$domDown&&\"\"===l.opts.threshold?Math.floor(1*l.$domDown.height()/3):l.opts.threshold,l.opts.scrollArea==b?(l.$scrollArea=d,l._scrollContentHeight=e.height(),l._scrollWindowHeight=c.documentElement.clientHeight):(l.$scrollArea=l.opts.scrollArea,l._scrollContentHeight=l.$element[0].scrollHeight,l._scrollWindowHeight=l.$element.height()),k(l),d.on(\"resize\",function(){l._scrollWindowHeight=l.opts.scrollArea==b?b.innerHeight:l.$element.height()}),l.$element.on(\"touchstart\",function(a){l.loading||(g(a),h(a,l))}),l.$element.on(\"touchmove\",function(a){l.loading||(g(a,l),i(a,l))}),l.$element.on(\"touchend\",function(){l.loading||j(l)}),l.$scrollArea.on(\"scroll\",function(){l._scrollTop=l.$scrollArea.scrollTop(),\"\"!=l.opts.loadDownFn&&!l.loading&&!l.isLockDown&&l._scrollContentHeight-l._threshold<=l._scrollWindowHeight+l._scrollTop&&m(l)})},f.prototype.lock=function(a){var b=this;void 0===a?\"up\"==b.direction?b.isLockDown=!0:\"down\"==b.direction?b.isLockUp=!0:(b.isLockUp=!0,b.isLockDown=!0):\"up\"==a?b.isLockUp=!0:\"down\"==a&&(b.isLockDown=!0,b.direction=\"up\")},f.prototype.unlock=function(){var a=this;a.isLockUp=!1,a.isLockDown=!1,a.direction=\"up\"},f.prototype.noData=function(a){var b=this;void 0===a||1==a?b.isData=!1:0==a&&(b.isData=!0)},f.prototype.resetload=function(){var b=this;\"down\"==b.direction&&b.upInsertDOM?b.$domUp.css({height:\"0\"}).on(\"webkitTransitionEnd mozTransitionEnd transitionend\",function(){b.loading=!1,b.upInsertDOM=!1,a(this).remove(),l(b)}):\"up\"==b.direction&&(b.loading=!1,b.isData?(b.$domDown.html(b.opts.domDown.domRefresh),l(b),k(b)):b.$domDown.html(b.opts.domDown.domNoData))}}(window.Zepto||window.jQuery);"],"sourceRoot":"/source/"}